# 待开发功能清单 (TODO List)

> 最后更新: 2024年12月
> 主体功能已完成，以下为增强功能和优化项

## 🚀 高优先级任务

### 1. 游戏倾向度功能 ⭐⭐⭐⭐⭐

**目标**: 在每日投票中添加1-5分的游戏倾向度评分系统

**具体任务**:

- [ ] 扩展 `DailyVote` 数据模型，添加 `gamePreferences` 字段
- [ ] 在投票页面添加星级评分组件（每个游戏旁边）
- [ ] 更新投票提交逻辑，保存倾向度数据
- [ ] 在投票结果中展示平均倾向度分数
- [ ] 基于倾向度优化周末组队的推荐算法

**技术要点**:

- 使用 Ant Design 的 Rate 组件
- 数据结构: `{ gameId: string, tendency: number }`
- 计算并展示平均倾向度

---

### 2. 排序功能增强 ⭐⭐⭐⭐

**目标**: 为各个列表添加多维度排序功能

#### 2.1 游戏库排序

- [ ] 添加排序选择器组件
- [ ] 实现按收藏数排序
- [ ] 实现按点赞数排序
- [ ] 实现综合热度排序（收藏+点赞权重）
- [ ] 保存用户排序偏好到本地存储

#### 2.2 每日投票排序

- [ ] 按得票数排序（默认）
- [ ] 按投票时间排序
- [ ] 按倾向度分数排序（实现倾向度功能后）

#### 2.3 周末分组排序

- [ ] 按团队人数排序
- [ ] 按活动时间排序
- [ ] 按创建时间排序

---

## 📊 中优先级任务

### 3. 报表功能模块 ⭐⭐⭐

**目标**: 提供数据统计和可视化报表

#### 3.1 游戏收藏情况报表

- [ ] 创建报表页面路由和组件
- [ ] 游戏收藏排行榜（Top 10）
- [ ] 用户收藏数量分布图
- [ ] 收藏趋势折线图（按时间）
- [ ] 导出收藏数据为CSV

#### 3.2 每日投票报表

- [ ] 投票参与人数统计（日/周/月）
- [ ] 游戏得票排行榜
- [ ] 最高得票统计（支持周/月/季度视图）
- [ ] 投票参与度趋势图
- [ ] 用户投票活跃度分析

#### 3.3 周末组队报表

- [ ] 组队活动总数统计
- [ ] 游戏热度分析（哪些游戏组队最多）
- [ ] 个人参与组队统计
- [ ] 组队成功率分析
- [ ] 时间段分布分析

**技术方案**:

- 使用 ECharts 或 Chart.js 进行可视化
- 创建独立的 `/reports` 路由
- 添加时间范围选择器
- 实现数据导出功能

---

## 🔧 低优先级任务

### 4. 优化与部署 ⭐⭐

- [ ] 响应式设计优化（特别是移动端）
- [ ] 性能优化（懒加载、虚拟滚动）
- [ ] 错误边界处理完善
- [ ] EdgeOne 部署配置和优化

### 5. 用户体验优化 ⭐⭐

- [ ] 优化游戏卡片的交互体验
- [ ] 添加加载骨架屏
- [ ] 优化空状态展示
- [ ] 添加操作成功/失败的动画反馈

### 6. 技术债务清理 ⭐

- [ ] 添加更多单元测试
- [ ] 代码重构和优化
- [ ] 文档完善
- [ ] TypeScript 类型优化

---

## 📋 实施计划

### 第一阶段（1-2周）

1. 完成游戏倾向度功能
2. 完成所有排序功能
3. 基础报表框架搭建

### 第二阶段（2-3周）

1. 完成所有报表功能
2. 数据可视化实现
3. 导出功能实现

### 第三阶段（1周）

1. 性能优化
2. 移动端适配
3. 部署上线

---

## 🛠️ 技术栈补充

### 新增依赖

```json
{
  "echarts": "^5.4.3",
  "echarts-for-react": "^3.0.2",
  "file-saver": "^2.0.5",
  "xlsx": "^0.18.5"
}
```

### 新增组件

- `SortSelector`: 通用排序选择器组件
- `RatingInput`: 倾向度评分组件
- `ChartWrapper`: 图表容器组件
- `ExportButton`: 数据导出按钮组件

---

## 📝 注意事项

1. **数据兼容性**: 新功能要确保与现有数据结构兼容
2. **性能考虑**: 报表查询可能涉及大量数据，需要优化查询和缓存
3. **用户权限**: 某些报表可能需要权限控制
4. **移动端适配**: 图表在移动端的展示需要特别优化

---

## ✅ 完成标准

每个功能完成需要满足：

1. 功能正常工作
2. 有适当的错误处理
3. 移动端可用
4. 有基础的测试覆盖
5. 更新相关文档

---

**项目状态**: 主体功能已完成，待增强功能开发中
**预计完成时间**: 4-6周（根据开发资源调整）

## 新功能与优化建议（2025-07-04）

1. **个人中心**

   - 新增Profile页面，展示用户历史投票、组队、收藏等信息。
   - 需扩展用户相关API和前端页面。
2. **定时任务归档**

   - 后端（LeanCloud云函数或定时脚本）每天00:00归档投票和组队数据，生成历史快照。
   - 前端报表可使用。
3. **每日投票分享链接**

   - 每日投票结果页生成唯一分享链接，支持一键复制/分享。
   - 可结合路由参数和短链服务。
4. **文件上传功能**

   - 前端集成文件上传组件，支持图片/文档等类型。
   - 后端可对接LeanCloud文件存储或NFS。
   - 注意安全校验和权限控制。
5. **组件复用优化**

   - 梳理现有UI组件，提取通用部分，减少重复实现。
   - 建议建立统一的组件库目录。
6. **数据类型检查**

   - 全面检查TypeScript类型定义，补充注释和边界情况。
   - 增加类型测试用例，保障类型安全。
